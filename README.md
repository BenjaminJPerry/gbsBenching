# dedup benchmarking of GBS ft. Bees

---
## gquery examples for related keyfile data
```
gquery
-t gbs_keyfile
-b taxname
-p "columns=flowcell,libraryprepid,enzyme;sequencing_platform=novaseq;no_unpivot;group"
bee
```
```
flowcell        libraryprepid   enzyme
HHNNVDRXY       SQ1647          MspI-ApeKI      175
HN7WGDRXY       SQ1793          MspI-ApeKI      80
HN7WGDRXY       SQ1794          MspI-ApeKI      77
```
---
```
gquery
-t gbs_keyfile
-b taxname
-p "columns=flowcell,libraryprepid,enzyme;sequencing_platform=novaseq;no_unpivot;group"
kauri
```
```
flowcell        libraryprepid   enzyme
HN7GKDRXY       1795            ApeKI           74  - this is actually Bees
HN7GKDRXY       1796            PstI-MspI       74
HN7GKDRXY       1806            SbfI-MspI       74
```
## Command line gbs qc calls

Examples of restart_qc.src scripts generated by ./run_gbs_qc interactive mode.
```
export SEQ_PRISMS_BIN=/dataset/gseq_processing/active/bin/gbs_prism/seq_prisms
export GBS_PRISM_BIN=/dataset/gseq_processing/active/bin/gbs_prism

/dataset/gseq_processing/active/bin/gbs_prism/ag_gbs_qc_prism.sh \
-m novaseq \
-C slurm \
-p /dataset/gseq_processing/active/bin/gbs_prism/nomerge_options_file.txt \
-a unblind \
-O /dataset/hiseq/scratch/postprocessing/gbs/220322_A01439_0058_AHN7GKDRXY \
-r 220322_A01439_0058_AHN7GKDRXY \
# libraries
SQ1795.all.bee_not_kauri.ApeKI
```
---
```
export SEQ_PRISMS_BIN=/dataset/gseq_processing/active/bin/gbs_prism/seq_prisms
export GBS_PRISM_BIN=/dataset/gseq_processing/active/bin/gbs_prism

/dataset/gseq_processing/active/bin/gbs_prism/ag_gbs_qc_prism.sh 
-m novaseq 
-C slurm 
-p /dataset/gseq_processing/active/bin/gbs_prism/nomerge_options_file.txt 
-a unblind 
-O /dataset/hiseq/scratch/postprocessing/gbs/220322_A01439_0058_AHN7GKDRXY 
-r 220317_A01439_0057_BHN7WGDRXY 
# libraries
SQ1793.all.bee.MspI-ApeKI 
SQ1794.all.bee.MspI-ApeKI
```

# Dereplication Software

1. `vsearch --fastx_uniques seqs --output rep-set.fna --uc vsearch-derep.uc --relabel_sha1 --relabel_keep`

2. 